{"version":3,"file":"zodiac.js","sources":["../src/events/eventBus.ts","../src/options.ts","../src/components/componentBase.ts","../src/utilities.ts","../src/components/autoplay.ts","../src/components/controls.ts","../src/components/itemState.ts","../src/components/liveRegion.ts","../src/components/track.ts","../src/components/drag.ts","../src/zodiac.ts"],"sourcesContent":["/**\n * Defines a zodiac slider event.\n */\nexport interface EventInterface {\n  /**\n   * The callback function for the event.\n   */\n  callback: CallableFunction;\n\n  /**\n   * The name of the event.\n   */\n  name: string;\n}\n\n/**\n * Provides an event bus for tracking slider related events.\n */\nexport class EventBus {\n\n  /**\n   * A list of subscribed events.\n   */\n  protected events: EventInterface[];\n\n  constructor() {\n    this.events = [];\n  }\n\n  /**\n   * Emits events by name with arguments for the callback function.\n   *\n   * @param names - The event names to emit.\n   * @param args - Arguments for the callback function.\n   */\n  public emit(names: string[], ...args: unknown[]): void {\n    names.forEach((name) => {\n      this.filterByName(name).forEach((event) => {\n        event.callback(...args);\n      });\n    });\n  }\n\n  /**\n   * Unsubscribes event(s) by name(s).\n   *\n   * @param names - A list of event names to unsubscribe.\n   */\n  public off(names: string[]): void {\n    for (const name of names) {\n      this.events = this.events.filter((event) => event.name !== name);\n    }\n  }\n\n  /**\n   * Subscribes an event with a callback function.\n   *\n   * @param names - A list of event names to subscribe to.\n   * @param callback - A callback function to run on the events.\n   */\n  public on(names: string[], callback: CallableFunction): void {\n    names.forEach((name) => this.events.push({name, callback}));\n  }\n\n  /**\n   * Filter events by name.\n   *\n   * @param name - The name to filter by.\n   *\n   * @returns The result event set.\n   */\n  protected filterByName(name: string): EventInterface[] {\n    return this.events.filter((event) => event.name === name);\n  }\n\n}\n","import { EventBus } from './events/eventBus';\n\n/**\n * A collection of classes used by the slider to identify specific elements.\n *\n * These classes cannot be set in the media query options.\n */\nexport interface ClassesInterface {\n\n  /**\n   * The class used for the inner slider container.\n   */\n  inner?: string;\n\n  /**\n   * The class used by the slider items.\n   */\n  items?: string;\n\n  /**\n   * The class for the track slider div surrounding the items.\n   */\n  track?: string;\n\n}\n\n/**\n * A collection of options used to configure the slider.\n */\nexport interface OptionsInterface {\n\n  /**\n   * Whether or not the slider should autoplay.\n   */\n  autoplay?: boolean;\n\n  /**\n   * The delay before the carousel will transition.\n   */\n  autoplaySpeed?: number;\n\n  /**\n   * A collection of classes used by the slider to identify specific elements.\n   *\n   * These classes cannot be set in the media query options.\n   */\n  classes?: ClassesInterface;\n\n  /**\n   * Enables the live region element.\n   */\n  enableLiveRegion?: boolean;\n\n  /**\n   * The gap between slides.\n   */\n  gap?: number;\n\n  /**\n   * The total number of items to display per view.\n   */\n  itemsPerView?: number;\n\n  /**\n   * A template that is used for the live region's text.\n   *\n   * The following patterns will be replaced programmatically:\n   * - `@position` - The position of the active slider item.\n   * - `@total` - The total number of slider items\n   * - `@title` - The title of the slider item. The title is derived from the\n   *   `data-zodiac-live-region-title` attribute within or on an item.\n   */\n  liveRegionText?: string;\n\n  /**\n   * The media queries configured with options.\n   */\n  mediaQueryLists?: {\n\n    [key: string]: MediaQueryList;\n\n  };\n\n  /**\n   * A collection of options applied at the specific media query.\n   */\n  mediaQueryOptions?: MediaQueryOptionsInterface;\n\n  /**\n   * Whether or not autoplay should pause on hover.\n   */\n  pauseOnHover?: boolean;\n\n  /**\n   * The speed at which slides will transition.\n   */\n  transitionSpeed?: number;\n\n}\n\n/**\n * A collection of options applied at the specific media query.\n */\nexport interface MediaQueryOptionsInterface {\n\n  [key: string]: OptionsInterface;\n\n}\n\n/**\n * The media queries configured with options.\n */\nexport interface MediaQueryListsInterface {\n\n  /**\n   * The `MediaQueryList` for the supplied options.\n   */\n  mediaQueryList: MediaQueryList;\n\n  /**\n   * The options for the provided `MediaQueryList`.\n   */\n  options: OptionsInterface;\n}\n\n/**\n * An object used to configure the slider.\n */\nexport class Options {\n\n  /**\n   * The base options unrestricted by any media query.\n   */\n  protected baseOptions: OptionsInterface = {\n    autoplay: true,\n    autoplaySpeed: 5000,\n    classes: {\n      inner: 'zodiac-inner',\n      items: 'zodiac-item',\n      track: 'zodiac-track',\n    },\n    enableLiveRegion: true,\n    gap: 8,\n    itemsPerView: 5,\n    liveRegionText: 'Slide @position of @total @title',\n    pauseOnHover: true,\n    transitionSpeed: 500,\n  };\n\n  /**\n   * The active options based on the computed media queries.\n   */\n  protected effectiveOptions: OptionsInterface;\n\n  /**\n   * The event bus.\n   *\n   * The event bus is used to notify when a media query has changed.\n   */\n  protected eventBus: EventBus;\n\n  /**\n   * The media queries configured with options.\n   */\n  protected mediaQueryLists: MediaQueryListsInterface[] = [];\n\n  /**\n   * A collection of options applied at the specific media query.\n   */\n  protected mediaQueryOptions: MediaQueryOptionsInterface = {};\n\n  /**\n   * Constructs a slider option set.\n   *\n   * A default set of options is used if no user options are provided.\n   *\n   * @throws {@link TypeError}\n   * Throws an error if the `classes`, `enableLiveRegion` or `liveRegionText`\n   * options are found in the `mediaQueryOptions`.\n   *\n   * @param eventBus - The event bus.\n   * @param options - The user supplied options.\n   */\n  public constructor(eventBus: EventBus, options: OptionsInterface = {}) {\n    this.eventBus = eventBus;\n\n    // Override the default base options with those provided by the user.\n    Object.assign(this.baseOptions, options);\n\n    // Check if any media query options were provided.\n    if (options.mediaQueryOptions) {\n      const mediaQueryOptions = options.mediaQueryOptions;\n\n      for (const [mediaQuery, mediaQueryOptionSet] of Object.entries(mediaQueryOptions)) {\n        if (mediaQueryOptionSet) {\n          const mediaQueryList = matchMedia(mediaQuery);\n\n          this.validateMediaQueryOptions(mediaQueryOptionSet);\n\n          this.mediaQueryLists.push({\n            mediaQueryList,\n            options: mediaQueryOptionSet,\n          });\n\n          mediaQueryList.addEventListener('change', () => {\n            this.rebuildEffectiveOptions();\n          });\n        }\n      }\n    }\n\n    this.rebuildEffectiveOptions();\n  }\n\n  /**\n   * Gets the effective options.\n   *\n   * @returns The effective options.\n   */\n  public getEffectiveOptions(): OptionsInterface {\n    return this.effectiveOptions;\n  }\n\n  /**\n   * Rebuilds the effective options.\n   *\n   * If there are any matching media query options, they will override the base\n   * options.\n   */\n  protected rebuildEffectiveOptions() {\n    this.eventBus.emit(['rebuildEffectiveOptions.before']);\n\n    const effectiveOptions = Object.assign({}, this.baseOptions);\n\n    for (const list of this.mediaQueryLists) {\n      if (list.mediaQueryList.matches) {\n        Object.assign(effectiveOptions, list.options);\n      }\n    }\n\n    this.effectiveOptions = Object.freeze(effectiveOptions);\n\n    this.eventBus.emit(['rebuildEffectiveOptions.after']);\n  }\n\n  /**\n   * Checks the media query options for invalid properties.\n   *\n   * @throws {@link TypeError}\n   * Throws an error if the `classes`, `enableLiveRegion` or `liveRegionText`\n   * options are found in the `mediaQueryOptions`.\n   */\n  protected validateMediaQueryOptions(options: OptionsInterface) {\n    const invalidOptions = [\n      'classes',\n      'enableLiveRegion',\n      'liveRegionText',\n    ];\n\n    invalidOptions.forEach((invalidOption) => {\n      if (Object.hasOwnProperty.call(options, invalidOption)) {\n        throw new TypeError(`The ${invalidOption} property can only be set once.`);\n      }\n    });\n  }\n\n}\n","import { OptionsInterface } from '../options';\n\nimport Zodiac from '../zodiac';\n\n/**\n * Defines the structure of a component.\n *\n * Components in Zodiac are used to compartmentalize specific areas of concern\n * within the slider. Functionality that is common between all components is\n * placed in the base `Zodiac` instance.\n */\nexport interface ComponentInterface {\n\n  /**\n   * Mounts the component to the slider.\n   */\n  mount(zodiac: Zodiac): void;\n\n}\n\n/**\n * A base implementation of ComponentInterface.\n * @api\n */\nexport abstract class ComponentBase implements ComponentInterface {\n\n  /**\n   * The slider's options.\n   */\n  protected options: OptionsInterface;\n\n  /**\n   * The slider instance.\n   */\n  protected zodiac: Zodiac;\n\n  /**\n   * {@inheritDoc ComponentInterface.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    this.zodiac = zodiac;\n    this.options = this.zodiac.getEffectiveOptions();\n  }\n\n}\n\n// The constructor for the `UpdateEffectiveOptions` mixin. The `any` type is\n// required for the mixin's constructor.\n// @see https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype UpdateEffectiveOptionsContructor = new (...args: any[]) => ComponentBase;\n\n/**\n * A mixin that rebuilds the options when they are changed.\n *\n * @returns A mixin that rebuilds the effective options.\n */\nexport function UpdateEffectiveOptions<TBase extends UpdateEffectiveOptionsContructor>(Base: TBase) {\n  return class UpdatingEffectiveOptions extends Base {\n\n    public mount(zodiac: Zodiac): void {\n      super.mount(zodiac);\n\n      this.zodiac.getEventBus().on(['rebuildEffectiveOptions.after'], () => {\n        this.zodiac.getEventBus().emit(['updateEffectiveOptions.before']);\n        this.options = this.zodiac.getEffectiveOptions();\n        this.zodiac.getEventBus().emit(['updateEffectiveOptions.after']);\n      });\n    }\n\n  };\n}\n","/**\n * A collection of static helper methods.\n */\nexport class Utilities {\n\n  /**\n   * CSS selectors for focusable elements.\n   */\n  public static readonly focusableSelectors = [\n    '* a',\n    '* area',\n    '* input',\n    '* select',\n    '* textarea',\n    '* button',\n    '* iframe',\n    '* object',\n    '* embed',\n    '* *[tabindex]',\n    '* *[contenteditable]',\n  ];\n\n  /**\n   * Generates an array of numbers starting at a given position.\n   *\n   * @param size - The size of the array to generate.\n   * @param startAt - The position to start at.\n   *\n   * @returns The generated array.\n   */\n  public static range(size: number, startAt = 0): number[] {\n    return [...Array(size).keys()].map((index) => index + startAt);\n  }\n\n  /**\n   * Maps a number in an input range to a number in an output range.\n   *\n   * This method takes an input number that exists with a specific range, and\n   * outputs a number scaled to an output range.\n   *\n   * @see {@link https://math.stackexchange.com/questions/377169/going-from-a-value-inside-1-1-to-a-value-in-another-range}\n   *\n   * @param item - The original number within the input range.\n   * @param inMin - The minimum number in the input range.\n   * @param inMax - The maximum number in the input range.\n   * @param outMin - The minimum number in the output range.\n   * @param outMax - The maximum number in the output range.\n   *\n   * @returns The new number within the output range.\n   */\n  public static rangeMap(item: number, inMin: number, inMax: number, outMin: number, outMax: number): number {\n    return (item - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\n  }\n\n}\n","import Zodiac from '../zodiac';\n\nimport { ComponentBase } from './componentBase';\nimport { Utilities } from '../utilities';\n\n/**\n * Adds autoplay capabilities to the slider.\n *\n * When mounted, this component will have the following possible side effects:\n * - Auto-rotation will be started (if configured correctly)\n * - Auto-rotation will be paused when the slider is being dragged\n * - Auto-rotation will be paused when a focusable element is focused\n * - Auto-rotation will be conditionally paused when hovering over the slider\n *\n * @see Utilities.focusableSelectors\n *   For a description of what qualifies as a \"focusable\" element.\n */\nexport class Autoplay extends ComponentBase {\n\n  /**\n   * The autoplay interval ID.\n   */\n  protected interval: NodeJS.Timeout;\n\n  /**\n   * An `AbortController` for resetting the mouse events in `this.pauseOnHover()`.\n   */\n  protected abortController: AbortController;\n\n  /**\n   * {@inheritDoc ComponentBase.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    super.mount(zodiac);\n\n    this.abortController = new AbortController();\n\n    this.start();\n    this.pauseOnDrag();\n    this.pauseOnFocus();\n    this.pauseOnHover();\n\n    // Reconfigure autoplay and pause on hover configuration when the options\n    // are rebuilt.\n    this.zodiac.getEventBus().on(['updateEffectiveOptions.after'], () => {\n      this.abortController.abort();\n\n      this.abortController = new AbortController();\n\n      this.stop();\n      this.start();\n      this.pauseOnHover();\n    });\n  }\n\n  /**\n   * Pauses the slider's auto-rotation when the slider is being dragged.\n   */\n  protected pauseOnDrag(): void {\n    this.zodiac.getEventBus().on(['drag.before'], () => {\n      this.stop();\n    });\n\n    this.zodiac.getEventBus().on(['drag.after'], () => {\n      this.start();\n    });\n  }\n\n  /**\n   * Pauses the slider's auto-rotation when any focusable element is focused.\n   */\n  protected pauseOnFocus(): void {\n    const focusableSelectors = Utilities.focusableSelectors.join(', ');\n    const focusable = this.zodiac.getSliderElement().querySelectorAll<HTMLElement>(focusableSelectors);\n\n    focusable.forEach((element) => {\n      element.addEventListener('focusin', () => this.stop());\n      element.addEventListener('focusout', () => this.start());\n    });\n  }\n\n  /**\n   * Pauses the slider's auto-rotation on hover (if applicable).\n   *\n   * If `pauseOnHover` is true, the slider's auto-rotation will be stopped when\n   * the user's cursor enters the slider element, then resumed when it leaves.\n   */\n  protected pauseOnHover(): void {\n    if (!this.options.pauseOnHover) {\n      // This is a no-op method if pause on hover is not enabled.\n      return;\n    }\n\n    const sliderElement = this.zodiac.getSliderElement();\n\n    sliderElement.addEventListener('mouseenter', () => {\n      this.stop();\n    }, { signal: this.abortController.signal });\n    sliderElement.addEventListener('mouseleave', () => {\n      this.start();\n    }, { signal: this.abortController.signal });\n  }\n\n  /**\n   * Auto-rotates the slider using the configured interval.\n   */\n  protected start(): void {\n    const { autoplay, autoplaySpeed } = this.options;\n\n    // Check if autoplay is enabled with a positive interval duration.\n    if (autoplay && autoplaySpeed > 0) {\n      // Prevent multiple autoplay intervals from occurring simultaneously.\n      this.stop();\n\n      // Create an interval to continuously switch to the next item on a delay.\n      this.interval = setInterval(() => {\n        this.zodiac.getEventBus().emit(['autoplay.before']);\n        this.zodiac.next();\n        this.zodiac.getEventBus().emit(['autoplay.after']);\n      }, autoplaySpeed);\n    }\n  }\n\n  /**\n   * Stops the slider's auto-rotation (if applicable).\n   */\n  protected stop(): void {\n    clearInterval(this.interval);\n  }\n\n}\n","import Zodiac from '../zodiac';\n\nimport { ComponentBase } from './componentBase';\n\n/**\n * Adds UI control capabilities to the slider.\n */\nexport class Controls extends ComponentBase {\n\n  /**\n   * {@inheritDoc ComponentBase.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    super.mount(zodiac);\n\n    this.setUpControls();\n  }\n\n  /**\n   * Attaches navigation buttons to the next & previous slider controls.\n   */\n  protected setUpControls(): void {\n    const sliderElement = this.zodiac.getSliderElement();\n\n    const nextBtn = sliderElement.querySelector('[data-zodiac-direction=\"right\"]');\n\n    if (nextBtn) {\n      nextBtn.addEventListener('click', () => this.zodiac.next());\n    }\n\n    const prevBtn = sliderElement.querySelector('[data-zodiac-direction=\"left\"]');\n\n    if (prevBtn) {\n      prevBtn.addEventListener('click', () => this.zodiac.previous());\n    }\n  }\n\n}\n","import Zodiac from '../zodiac';\n\nimport { ComponentBase } from './componentBase';\nimport { Utilities } from '../utilities';\n\n/**\n * Keeps the state of each item updated.\n */\nexport class ItemState extends ComponentBase {\n\n  /**\n   * The class that indicates an item is active.\n   */\n  protected readonly activeClass = 'active';\n\n  /**\n   * {@inheritDoc ComponentBase.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    super.mount(zodiac);\n\n    this.setActiveClass();\n    this.setAccessibilityAttributes();\n    this.setInitialItemState();\n    this.adjustItemStateOnMove();\n  }\n\n  /**\n   * Adds the active class to an item.\n   *\n   * @param item - The element to apply the active class to.\n   */\n  protected addActiveClassToItem(item: HTMLElement): void {\n    item.classList.add(this.activeClass);\n  }\n\n  /**\n   * Adjusts each item's state by listening to slider events.\n   */\n  protected adjustItemStateOnMove(): void {\n    this.zodiac.getEventBus().on([\n      'move.after',\n      'drag.after',\n    ], () => {\n      this.setActiveClass();\n      this.setAccessibilityAttributes();\n    });\n  }\n\n  /**\n   * Removes the active class from each item in the slider.\n   */\n  protected removeActiveClass(): void {\n    this.zodiac.getItems().forEach((item) => item.classList.remove(this.activeClass));\n  }\n\n  /**\n   * Applies the appropriate attributes for accessibility to each item.\n   *\n   * Items that aren't currently visible will be set as hidden (using\n   * `aria-hidden`) and have a negative tab index applied to them.\n   */\n  protected setAccessibilityAttributes(): void {\n    const { itemsPerView } = this.options;\n    const position = this.zodiac.getPosition();\n\n    // Compute a range of visible slide positions based on the the number of\n    // items per view and the current position.\n    const visibleRange = Utilities.range(itemsPerView, position);\n\n    this.zodiac.getItems().forEach((item, index) => {\n      const visible = visibleRange.includes(index);\n\n      // This value must be converted to a string since `setAttribute()`\n      // expects `value` to be a string.\n      const ariaHidden = (!visible).toString();\n\n      item.setAttribute('aria-hidden', ariaHidden);\n      this.setTabindex(item, visible);\n\n      // Collect a list of focusable items within each slider item.\n      const focusableItems = item.querySelectorAll(Utilities.focusableSelectors.join(', '));\n\n      // Set the tab index for each focusable element within each slider item.\n      focusableItems.forEach((element: HTMLElement) => {\n        this.setTabindex(element, visible);\n      });\n    });\n  }\n\n  /**\n   * Sets the active class on the active item and removes it from the rest.\n   *\n   * There can only be one active item at a time. The active item is tracked by\n   * `Zodiac.getPosition()`.\n   */\n  protected setActiveClass(): void {\n    const currentPosition = this.zodiac.getPosition();\n\n    const activeItem = this.zodiac.getItems().item(currentPosition);\n    this.removeActiveClass();\n    this.addActiveClassToItem(activeItem);\n  }\n\n  /**\n   * Applies an indexing attribute to each item.\n   */\n  protected setInitialItemState(): void {\n    this.zodiac.getItems().forEach((item, index) => {\n      item.setAttribute('data-zodiac-item-index', (index + 1).toString());\n    });\n  }\n\n  /**\n   * Sets the tabindex of an element based on whether it is visible.\n   *\n   * @param element - The element to modify.\n   * @param visible - Whether or not the element is active.\n   */\n  protected setTabindex(element: HTMLElement, visible: boolean): void {\n    if (!visible) {\n      element.setAttribute('tabindex', '-1');\n    } else {\n      element.removeAttribute('tabindex');\n    }\n  }\n\n}\n","import Zodiac from '../zodiac';\n\nimport { ComponentBase } from './componentBase';\n\n/**\n * Adds a live region, so the slide position can be announced to screen readers.\n */\nexport class LiveRegion extends ComponentBase {\n\n  /**\n   * The live region element.\n   */\n  protected liveRegion: HTMLDivElement;\n\n  /**\n   * {@inheritDoc ComponentBase.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    super.mount(zodiac);\n\n    if (this.options.enableLiveRegion) {\n      this.createLiveRegion();\n      this.updateLiveRegion();\n    }\n  }\n\n  /**\n   * Creates and adds the live region element to the slider.\n   */\n  protected createLiveRegion() {\n    this.liveRegion = document.createElement('div');\n    this.liveRegion.setAttribute('aria-live', 'polite');\n    this.liveRegion.setAttribute('aria-atomic', 'true');\n    this.liveRegion.classList.add('zodiac-live-region');\n\n    this.zodiac.getSliderElement().appendChild(this.liveRegion);\n  }\n\n  /**\n   * Retrieves the title of the ative item that will be used in the live region.\n   *\n   * The title is expected to be placed in the `data-zodiac-live-region-title`\n   * attribute. This can be on a `zodiac-item` element, or within.\n   *\n   * @returns The title of the active slider item.\n   */\n  protected getLiveRegionTitle(): string {\n    const activeItem = this.zodiac.getSliderElement().querySelector<HTMLElement>('.zodiac-item.active');\n\n    let title = '';\n\n    if (activeItem.dataset.zodiacLiveRegionTitle) {\n      title = activeItem.dataset.zodiacLiveRegionTitle;\n    } else {\n      const element = activeItem.querySelector<HTMLElement>('[data-zodiac-live-region-title]');\n\n      if (element) {\n        title = element.dataset.zodiacLiveRegionTitle;\n      }\n    }\n\n    return title;\n  }\n\n  /**\n   * Updates the text of the live region when the slider is moved.\n   */\n  protected updateLiveRegion() {\n    this.zodiac.getEventBus().on(['move.after', 'drag.after'], () => {\n      const position = this.zodiac.getPosition() + 1;\n      const total = this.zodiac.getItemTotal() + 1;\n      const title = this.getLiveRegionTitle();\n\n      this.liveRegion.innerText = this.options.liveRegionText\n        .replace('@position', position.toString())\n        .replace('@total', total.toString())\n        .replace('@title', title)\n        .trim();\n    });\n  }\n\n}\n","import Zodiac from '../zodiac';\n\nimport { ComponentBase } from './componentBase';\n\n/**\n * Manipulates the width of the slider track and each slider item.\n */\nexport class Track extends ComponentBase {\n\n  /**\n   * {@inheritDoc ComponentBase.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    super.mount(zodiac);\n\n    this.setItemWidth();\n    this.setTrackWidth();\n    this.setTrackTransitionDuration();\n    this.updateTrackOnResize();\n  }\n\n  /**\n   * Gets the margin size for slider items by dividing the gap option in half.\n   *\n   * @returns The gap option value divided in half.\n   */\n  protected getSliderItemMargin(): number {\n    return this.options.gap / 2;\n  }\n\n  /**\n   * Retrieves the width of the slider's inner element.\n   *\n   * @returns The width of the slider.\n   */\n  protected getSliderWidth(): number {\n    const selector = this.options.classes.inner;\n    const inner = this.zodiac.getSliderElement().querySelector(`.${selector}`);\n\n    const { width } = inner.getBoundingClientRect();\n\n    return width;\n  }\n\n  /**\n   * Sets the width and margin of each slider item.\n   *\n   * Each slider item's width is calculated by dividing the slider's width by\n   * configured total items per view minus the configured gap setting.\n   */\n  protected setItemWidth(): void {\n    const { itemsPerView } = this.options;\n\n    // Calculate the width of each slider item by dividing the total size of\n    // the inner slider by the total items per view.\n    this.zodiac.setItemWidth(this.getSliderWidth() / itemsPerView);\n\n    const sliderItemMargin = this.getSliderItemMargin();\n\n    this.zodiac.getItems().forEach((item) => {\n      // Apply the width to the slide item.\n      item.style.width = `${this.zodiac.getItemWidth() - sliderItemMargin * 2}px`;\n\n      // Add spacing between each slider item with left and right margin.\n      item.style.marginLeft = `${sliderItemMargin}px`;\n      item.style.marginRight = `${sliderItemMargin}px`;\n    });\n  }\n\n  /**\n   * Applies the transition speed setting to the track.\n   */\n  protected setTrackTransitionDuration(): void {\n    const { transitionSpeed } = this.options;\n    this.zodiac.getTrackElement().style.transitionDuration = `${transitionSpeed}ms`;\n  }\n\n  /**\n   * Set the width of the track element.\n   *\n   * The width of track element is equal to the width of the slider multiplied\n   * by the total number of items.\n   */\n  protected setTrackWidth(): void {\n    const trackWidth = this.zodiac.getItemWidth() * this.zodiac.getItems().length;\n\n    this.zodiac.getTrackElement().style.width = `${trackWidth}px`;\n  }\n\n  /**\n   * Update the track and item width when the window is resized.\n   */\n  protected updateTrackOnResize(): void {\n    this.zodiac.getEventBus().on(['updateEffectiveOptions.after'], () => {\n      this.zodiac.getEventBus().emit(['trackUpdated.before']);\n      this.setItemWidth();\n      this.setTrackWidth();\n      this.setTrackTransitionDuration();\n      this.zodiac.getEventBus().emit(['trackUpdated.after']);\n    });\n  }\n\n}\n","import Zodiac from '../zodiac';\n\nimport { ComponentBase } from './componentBase';\nimport { Utilities } from '../utilities';\n\ntype DragEvent = MouseEvent | TouchEvent;\n\n/**\n * A map of events that will represent dragging.\n */\ninterface DragEventMap {\n  'mousedown': DragEvent,\n  'mousemove': DragEvent,\n  'mouseleave': DragEvent,\n  'mouseup': DragEvent,\n  'touchcancel': DragEvent,\n  'touchend': DragEvent,\n  'touchmove': DragEvent,\n  'touchstart': DragEvent,\n}\n\ntype EventKey = keyof DragEventMap;\n\n/**\n * Adds dragging capabilities to the slider (for both mouse & touch inputs).\n */\nexport class Drag extends ComponentBase {\n\n  /**\n   * The class used to indicate that the slider is being dragged.\n   */\n  protected readonly draggingClass = 'dragging';\n\n  /**\n   * The value used to track and apply the `translate` CSS while dragging.\n   */\n  protected dragPosition = 0;\n\n  /**\n   * The `AbortController` for the `this.move()` method.\n   */\n  protected moveController: AbortController = null;\n\n  /**\n   * Events that move the slider when dragging.\n   */\n  protected readonly moveEventKeys: EventKey[] = [\n    'mousemove',\n    'touchmove',\n  ];\n\n  /**\n   * A flag used to determine whether the clicking of links is disallowed.\n   */\n  protected preventClick = false;\n\n  /**\n   * The position that will be given to `Zodiac` after the dragging has stopped.\n   */\n  protected snapPosition = 0;\n\n  /**\n   * Events that signal when dragging should begin.\n   */\n  protected readonly startEventKeys: EventKey[] = [\n    'mousedown',\n    'touchstart',\n  ];\n\n  /**\n   * The position of the event dispatcher at the start of the dragging process.\n   */\n  protected startingEventPosition = 0;\n\n  /**\n   * The `AbortController` for the `this.stop()` method.\n   */\n  protected stopController: AbortController = null;\n\n  /**\n   * Events that signal when dragging should end.\n   */\n  protected readonly stopEventKeys: EventKey[] = [\n    'mouseup',\n    'mouseleave',\n    'touchend',\n    'touchcancel',\n  ];\n\n  /**\n   * How far the slider must be dragged before moving begins.\n   */\n  protected readonly threshold = 20;\n\n  /**\n   * {@inheritDoc ComponentBase.mount}\n   */\n  public mount(zodiac: Zodiac): void {\n    super.mount(zodiac);\n\n    this.addStartEvents();\n    this.onDragEvents();\n    this.preventDefaultOnDragStart();\n    this.preventDefaultClickOnDragStart();\n  }\n\n  /**\n   * Applies the move events to the slider.\n   */\n  protected addMoveEvents(): void {\n    // Create an `AbortController` to remove these events after dragging is\n    // complete. This controller is recreated every time this method is called\n    // because it will be disabled after it's `abort` signal is sent.\n    this.moveController = new AbortController();\n\n    this.moveEventKeys.forEach((eventType) => {\n      this.zodiac.getTrackElement().addEventListener(eventType, (event) => this.move(event), { signal: this.moveController.signal });\n    });\n  }\n\n  /**\n   * Applies the start events to the slider.\n   */\n  protected addStartEvents(): void {\n    this.startEventKeys.forEach((eventType) => {\n      this.zodiac.getTrackElement().addEventListener(eventType, (event) => this.start(event));\n    });\n  }\n\n  /**\n   * Applies the stop events to the slider.\n   */\n  protected addStopEvents(): void {\n    // Create an `AbortController` to remove these events after dragging is\n    // complete. This controller is recreated every time this method is called\n    // because it will be disabled after it's `abort` signal is sent.\n    this.stopController = new AbortController();\n\n    this.stopEventKeys.forEach((eventType) => {\n      this.zodiac.getTrackElement().addEventListener(eventType, () => this.stop(), { signal: this.stopController.signal });\n    });\n  }\n\n  /**\n   * Retrieves the `screenX` value from an event depending on the event type.\n   *\n   * @param event - The event in which to derive the `screenX` value.\n   *\n   * @returns The `screenX` value of the event.\n   */\n  protected getScreenX(event: DragEvent): number {\n    if (event instanceof TouchEvent) {\n      return event.touches[0].screenX ?? 0;\n    }\n\n    return event.screenX;\n  }\n\n  /**\n   * Snaps a drag position into a valid `Zodiac` position.\n   *\n   * The `Drag` component tracks the drag position with a pixel value to\n   * animate dragging. This method snaps a drag position into valid `Zodiac`\n   * position to set the active slide.\n   *\n   * @param dragPosition - The position in pixels.\n   *\n   * @returns The position as a numeric index.\n   */\n  protected getSnapPosition(dragPosition: number): number {\n    let snapPosition = -Math.round(dragPosition / this.zodiac.getItemWidth());\n\n    const itemTotal = this.zodiac.getItemTotal();\n\n    // If the calculated position is greater than the total number of slider\n    // items then restart at the beginning.\n    if (snapPosition > itemTotal) {\n      snapPosition = 0;\n    }\n\n    // If the calculated position is less than zero then move to the end of\n    // the slider.\n    if (snapPosition < 0) {\n      snapPosition = itemTotal;\n    }\n\n    return snapPosition;\n  }\n\n  /**\n   * Mark all links within the slider track as draggable or un-draggable.\n   *\n   * Depending on the value of `draggable`, links within the slider track will\n   * be enabled or disabled by swapping between storing the link in an `href`\n   * or `data-href` attribute and toggling the `draggable` attribute.\n   *\n   * @param draggable - Whether to mark the items as draggable or un-draggable.\n   */\n  protected modifyLinks(draggable: boolean): void {\n    // Retrieve all links within the track element.\n    const links = this.zodiac.getTrackElement().querySelectorAll('a');\n\n    // Prevent unnecessary modification by checking if the draggable value\n    // matches the prevent click state.\n    if (this.preventClick === draggable) {\n      links.forEach((link) => {\n        // Determine the source and destination of the attribute modification\n        // based on the whether draggability is being enabled or disabled.\n        const source = draggable ? 'data-href' : 'href';\n        const destination = draggable ? 'href' : 'data-href';\n\n        // Add or remove the draggable attribute on the link element.\n        link.draggable = draggable;\n\n        link.setAttribute(destination, link.getAttribute(source));\n        link.removeAttribute(source);\n      });\n\n      // Indicate click has or hasn't been prevented.\n      this.preventClick = !this.preventClick;\n    }\n  }\n\n  /**\n   * Calculates & updates the position of the slider track on drag.\n   *\n   * During the move stage of the dragging, this method has the following side\n   * effects:\n   * - Calculates the dragging distance based on where the user clicked or\n   *   touched.\n   * - Determines how fast the slider should be dragged based on how close to\n   *   the edge the mouse cursor is moved.\n   * - Computes which slide to snap to after dragging is complete.\n   * - Animates the slider track while dragging.\n   *\n   * @param event - The DOM event emitted during the drag movement.\n   */\n  protected move(event: DragEvent): void {\n    this.zodiac.getEventBus().emit(['drag.move.before']);\n\n    // Determine the distance between the position of current event dispatcher\n    // the starting event dispatcher position.\n    const currentEventPosition = this.getScreenX(event) - this.zodiac.getSliderElement().offsetLeft;\n    const distance = currentEventPosition - this.startingEventPosition;\n\n    // Exit this method if the distance is less than the drag threshold.\n    if (Math.abs(distance) < this.threshold) {\n      return;\n    }\n\n    // Increase the acceleration speed based on how far the user has dragged\n    // the slider.\n    const accelerate = Utilities.rangeMap(Math.abs(distance), this.threshold, window.innerWidth, 1, 3);\n    // Determine by drag position by adding distance multiplied by the\n    // acceleration speed.\n    const dragPosition = this.dragPosition + (distance * accelerate);\n\n    event.preventDefault();\n\n    // Get the snap position from the current drag position.\n    this.snapPosition = this.getSnapPosition(dragPosition);\n    // Animate the dragging.\n    this.zodiac.getTrackElement().style.transform = `translate3d(${dragPosition}px, 0, 0)`;\n\n    this.zodiac.getEventBus().emit(['drag.move.after']);\n  }\n\n  /**\n   * Adds the `dragging` class to the slider track while it is being dragged.\n   */\n  protected onDragEvents(): void {\n    this.zodiac.getEventBus().on(['drag.before'], () => {\n      this.zodiac.getTrackElement().classList.add(this.draggingClass);\n    });\n\n    this.zodiac.getEventBus().on(['drag.after'], () => {\n      this.zodiac.getTrackElement().classList.remove(this.draggingClass);\n    });\n  }\n\n  /**\n   * Prevent link clicking when the slider is being dragged.\n   */\n  protected preventDefaultClickOnDragStart(): void {\n    this.zodiac.getEventBus().on(['drag.move.before'], () => {\n      this.modifyLinks(false);\n    });\n\n    this.zodiac.getEventBus().on(['drag.after'], () => {\n      // Wait for the slider to finishing animating before enabling the links.\n      setTimeout(() => {\n        this.modifyLinks(true);\n      }, this.options.transitionSpeed);\n    });\n  }\n\n  /**\n   * Prevents unnecessary dragging for slider items.\n   */\n  protected preventDefaultOnDragStart(): void {\n    this.zodiac.getItems().forEach((item) => {\n      item.addEventListener('dragstart', (event) => event.preventDefault());\n    });\n  }\n\n  /**\n   * Removes the move events from the slider to prevent unnecessary calculations.\n   */\n  protected removeMoveEvents(): void {\n    this.moveController.abort();\n  }\n\n  /**\n   * Removes the stop events from the slider to prevent unnecessary calculations.\n   */\n  protected removeStopEvents(): void {\n    this.stopController.abort();\n  }\n\n  /**\n   * Prepares the slider to be dragged when dragging has started.\n   *\n   * The slider is prepared by calculating the current drag position, relative\n   * to the `Zodiac`'s current position, and the position of the event\n   * dispatcher.\n   *\n   * @param event - The DOM event which fired this method.\n   */\n  protected start(event: DragEvent): void {\n    this.zodiac.getEventBus().emit(['drag.before']);\n\n    // Calculate the drag position by multiplying the slider's current position\n    // by the width of a single slide. The value of this calculation is\n    // converted to a negative number to animate the slider since it will\n    // eventually be passed into `translate3d`.\n    this.dragPosition = -Math.abs(this.zodiac.getPosition() * this.zodiac.getItemWidth());\n\n    this.snapPosition = this.getSnapPosition(this.dragPosition);\n\n    // Determine the position of the event dispatcher by subtracting the event\n    // dispatcher's position on the screen by the slider's offset of it's\n    // parent element.\n    this.startingEventPosition = this.getScreenX(event) - this.zodiac.getSliderElement().offsetLeft;\n\n    this.addMoveEvents();\n    this.addStopEvents();\n  }\n\n  /**\n   * Positions the slider after the dragging is complete.\n   */\n  protected stop(): void {\n    this.zodiac.setPosition(this.snapPosition);\n    this.zodiac.move(this.snapPosition);\n\n    this.removeMoveEvents();\n    this.removeStopEvents();\n\n    this.zodiac.getEventBus().emit(['drag.after']);\n  }\n\n}\n","import { EventBus } from './events/eventBus';\nimport { Options, OptionsInterface } from './options';\n\nimport { ComponentInterface, UpdateEffectiveOptions } from './components/componentBase';\nimport { Autoplay } from './components/autoplay';\nimport { Controls } from './components/controls';\nimport { ItemState } from './components/itemState';\nimport { LiveRegion } from './components/liveRegion';\nimport { Track } from './components/track';\nimport { Drag } from './components/drag';\n\n/**\n * The entry point for the Zodiac Slider.\n *\n * This class contains all properties and methods shared between each component.\n *\n * Components are mounted in `Zodiac.mount()`. This function iterates over each\n * component, invoking their `mount()` method & supplying itself as an argument.\n */\nexport default class Zodiac {\n\n  /**\n   * The slider components.\n   */\n  protected components: ComponentInterface[];\n\n  /**\n   * The event bus.\n   */\n  protected eventBus: EventBus;\n\n  /**\n   * The slider items.\n   */\n  protected items: NodeListOf<HTMLElement>;\n\n  /**\n   * The width of each slider item.\n   */\n  protected itemWidth: number;\n\n  /**\n   * The slider options.\n   */\n  protected options: Options;\n\n  /**\n   * The slider's current position in the item sequence (zero-indexed).\n   */\n  protected position: number;\n\n  /**\n   * The CSS selector for identifying the slider.\n   */\n  protected selector: string;\n\n  /**\n   * The element on which the slider has been initialized.\n   */\n  protected readonly sliderElement: HTMLElement;\n\n  /**\n   * The slider track element.\n   */\n  protected readonly trackElement: HTMLElement;\n\n  /**\n   * Constructs a `Zodiac` instance based on the provided selector and options.\n   *\n   * @param selector - The base selector to use.\n   * @param options - The options to initialize the slider with.\n   */\n  public constructor(selector: string, options?: OptionsInterface) {\n    this.eventBus = new EventBus();\n\n    this.selector = selector;\n    this.options = new Options(this.eventBus, options);\n\n    const effectiveOptions = this.options.getEffectiveOptions();\n\n    this.components = this.registerComponents();\n\n    this.sliderElement = document.querySelector(this.selector);\n    this.trackElement = this.sliderElement.querySelector(`.${effectiveOptions.classes.track}`);\n    this.items = this.sliderElement.querySelectorAll(`.${effectiveOptions.classes.items}`);\n\n    this.position = 0;\n\n    // Reposition the slider items on media query change.\n    this.eventBus.on(['trackUpdated.after'], () => this.next(0));\n  }\n\n  /**\n   * Retrieves the slider's effective options.\n   *\n   * @returns The slider's effective options.\n   */\n  public getEffectiveOptions(): OptionsInterface {\n    return this.options.getEffectiveOptions();\n  }\n\n  /**\n   * Retrieves the event bus.\n   *\n   * @returns The event bus.\n   */\n  public getEventBus(): EventBus {\n    return this.eventBus;\n  }\n\n  /**\n   * Retrieves the total number of items.\n   *\n   * @returns The total number of items offset by 1.\n   */\n  public getItemTotal(): number {\n    return this.items.length - 1;\n  }\n\n  /**\n   * Retrieves the width of a slider item.\n   *\n   * @returns The width of individual slider items.\n   */\n  public getItemWidth(): number {\n    return this.itemWidth;\n  }\n\n  /**\n   * Retrieves the slider's items.\n   *\n   * @returns The slider's items.\n   */\n  public getItems(): NodeListOf<HTMLElement> {\n    return this.items;\n  }\n\n  /**\n   * Retrieves the slider's position.\n   *\n   * @returns The position of the slider.\n   */\n  public getPosition(): number {\n    return this.position;\n  }\n\n  /**\n   * Retrieves the slider element.\n   *\n   * @returns The slider element.\n   */\n  public getSliderElement(): HTMLElement {\n    return this.sliderElement;\n  }\n\n  /**\n   * Retrieves the track element.\n   *\n   * @returns The track element.\n   */\n  public getTrackElement(): HTMLElement {\n    return this.trackElement;\n  }\n\n  /**\n   * Mounts the sliders components.\n   *\n   * @param thirdPartyComponents - A list of user defined components.\n   *\n   * @returns The current `Zodiac` instance.\n   */\n  public mount(thirdPartyComponents: ComponentInterface[] = []): this {\n    for (const component of this.components.concat(thirdPartyComponents)) {\n      component.mount(this);\n    }\n\n    return this;\n  }\n\n  /**\n   * Moves the slider based on the provided offset.\n   *\n   * @param offset - The position to move the slider.\n   */\n  public move(offset: number): void {\n    const transform = -1 * (this.getItemWidth() * offset);\n\n    this.trackElement.style.transform = `translate3d(${transform}px, 0px, 0px)`;\n  }\n\n  /**\n   * Move to the next slide.\n   *\n   * @param offset - How many slides to move forward.\n   */\n  public next(offset = 1): void {\n    this.eventBus.emit(['move.before']);\n\n    let position = this.getPosition();\n\n    position = position + offset;\n\n    if (position > this.getItemTotal()) {\n      position = 0;\n    }\n\n    this.move(position);\n\n    this.setPosition(position);\n\n    this.eventBus.emit(['move.after']);\n  }\n\n  /**\n   * Removes a custom event listener.\n   *\n   * @param names - A list of event names to unsubscribe.\n   *\n   * @returns The current `Zodiac` instance.\n   */\n  public off(names: string[]): this {\n    this.eventBus.off(names);\n\n    return this;\n  }\n\n  /**\n   * Adds a custom event listener with a callback function.\n   *\n   * @param names - A list of event names to subscribe to.\n   * @param callback - A callback function to run on the events.\n   *\n   * @returns The current `Zodiac` instance.\n   */\n  public on(names: string[], callback: CallableFunction): this {\n    this.eventBus.on(names, callback);\n\n    return this;\n  }\n\n  /**\n   * Move to the previous slide.\n   *\n   * @param offset - How many slides to move forward.\n   */\n  public previous(offset = 1): void {\n    this.eventBus.emit(['move.before']);\n\n    let position = this.getPosition();\n\n    position = position - offset;\n\n    if (position < 0) {\n      position = this.getItemTotal();\n    }\n\n    this.move(position);\n\n    this.setPosition(position);\n\n    this.eventBus.emit(['move.after']);\n  }\n\n  /**\n   * Sets the width of individual slider items.\n   *\n   * @param itemWidth - The new item width.\n   */\n  public setItemWidth(itemWidth: number): void {\n    this.itemWidth = itemWidth;\n  }\n\n  /**\n   * Sets the sliders position.\n   *\n   * @throws {@link RangeError}\n   * Will throw an error if the position is `Nan`, less than zero, or greater\n   * than the total number of items.\n   *\n   * @param position - The position to set.\n   */\n  public setPosition(position: number): void {\n    if (Number.isNaN(position) || position < 0 || position > this.getItemTotal()) {\n      throw new RangeError(`Invalid position: ${position}`);\n    }\n\n    this.position = Math.trunc(position);\n  }\n\n  /**\n   * Registers the required components provided by Zodiac.\n   *\n   * @returns A list of instantiated components.\n   */\n  protected registerComponents(): ComponentInterface[] {\n    return [\n      ItemState,\n      UpdateEffectiveOptions(Track),\n      UpdateEffectiveOptions(Autoplay),\n      Controls,\n      UpdateEffectiveOptions(Drag),\n      LiveRegion,\n    ].map((Component) => new Component());\n  }\n\n}\n"],"names":["EventBus","_classCallCheck","events","_createClass","key","value","emit","names","_this","_len","arguments","length","args","Array","_key","forEach","name","filterByName","event","callback","apply","off","_this2","_iterator","_createForOfIteratorHelper","_step","_loop","filter","s","n","done","err","e","f","on","_this3","push","Options","eventBus","options","undefined","_defineProperty","autoplay","autoplaySpeed","classes","inner","items","track","enableLiveRegion","gap","itemsPerView","liveRegionText","pauseOnHover","transitionSpeed","Object","assign","baseOptions","mediaQueryOptions","_i","_Object$entries","entries","_Object$entries$_i","_slicedToArray","mediaQuery","mediaQueryOptionSet","mediaQueryList","matchMedia","validateMediaQueryOptions","mediaQueryLists","addEventListener","rebuildEffectiveOptions","getEffectiveOptions","effectiveOptions","list","matches","freeze","invalidOptions","invalidOption","hasOwnProperty","call","TypeError","concat","ComponentBase","mount","zodiac","UpdateEffectiveOptions","Base","_Base","_inherits","UpdatingEffectiveOptions","_super","_createSuper","_get","_getPrototypeOf","prototype","getEventBus","Utilities","range","size","startAt","_toConsumableArray","keys","map","index","rangeMap","item","inMin","inMax","outMin","outMax","Autoplay","_ComponentBase","abortController","AbortController","start","pauseOnDrag","pauseOnFocus","abort","stop","focusableSelectors","join","focusable","getSliderElement","querySelectorAll","element","_this4","sliderElement","signal","_this5","_this$options","interval","setInterval","next","clearInterval","Controls","setUpControls","nextBtn","querySelector","prevBtn","previous","ItemState","_assertThisInitialized","setActiveClass","setAccessibilityAttributes","setInitialItemState","adjustItemStateOnMove","addActiveClassToItem","classList","add","activeClass","removeActiveClass","getItems","remove","position","getPosition","visibleRange","visible","includes","ariaHidden","toString","setAttribute","setTabindex","focusableItems","currentPosition","activeItem","removeAttribute","LiveRegion","createLiveRegion","updateLiveRegion","liveRegion","document","createElement","appendChild","getLiveRegionTitle","title","dataset","zodiacLiveRegionTitle","total","getItemTotal","innerText","replace","trim","Track","setItemWidth","setTrackWidth","setTrackTransitionDuration","updateTrackOnResize","getSliderItemMargin","getSliderWidth","selector","_inner$getBoundingCli","getBoundingClientRect","width","sliderItemMargin","style","getItemWidth","marginLeft","marginRight","getTrackElement","transitionDuration","trackWidth","Drag","addStartEvents","onDragEvents","preventDefaultOnDragStart","preventDefaultClickOnDragStart","addMoveEvents","moveController","moveEventKeys","eventType","move","startEventKeys","addStopEvents","stopController","stopEventKeys","getScreenX","TouchEvent","_event$touches$0$scre","touches","screenX","getSnapPosition","dragPosition","snapPosition","Math","round","itemTotal","modifyLinks","draggable","links","preventClick","link","source","destination","getAttribute","currentEventPosition","offsetLeft","distance","startingEventPosition","abs","threshold","accelerate","window","innerWidth","preventDefault","transform","draggingClass","_this6","setTimeout","removeMoveEvents","removeStopEvents","setPosition","Zodiac","components","registerComponents","trackElement","itemWidth","thirdPartyComponents","component","offset","Number","isNaN","RangeError","trunc","Component"],"mappings":"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"}